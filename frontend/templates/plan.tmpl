{{ template "header" . }}

<div class="container-fluid">
    <div class="row">
        <!-- 左侧计划任务列表 -->
        <div class="col-md-6">
            <h2 class="my-4">计划任务列表</h2>
            <ul class="list-group">
                <!-- 在这里动态加载计划任务 -->
                {{ range .PlanTasks }}
                <li class="list-group-item">
                    <strong>任务类型:</strong> {{ .TaskType }} <br>
                    <strong>任务时间:</strong> {{ .TaskTime }} <br>
                    <strong>内容详情:</strong> {{ .Content.Detail }} <br>
                    <strong>接收对象:</strong> {{ range .Recipients }}{{ .ID }} {{ end }} <br>
                    <a href="/delete_plan?id={{ .ID }}" class="btn btn-danger btn-sm mt-2">删除</a>
                </li>
                {{ end }}
            </ul>
        </div>

        <!-- 右侧添加计划任务表单 -->
        <div class="col-md-6">
            <h2 class="my-4">添加计划任务</h2>
            <form action="/add_plan" method="POST">
                <!-- 任务类型 -->
                <div class="form-group">
                    <label for="taskType">任务类型</label>
                    <select id="taskType" name="taskType" class="form-control" required>
                        <option value="single">单次任务</option>
                        <option value="recurring">循环任务</option>
                    </select>
                </div>

                <!-- 定时任务时间 (Cron 表达式) -->
                <div class="form-group mt-3">
                    <label for="taskTime">任务时间 (Cron 表达式)</label>
                    <input type="text" id="taskTime" name="taskTime" class="form-control" placeholder="例如：0 0 * * * ?" required>
                </div>

                <!-- 任务内容 -->
                <div class="form-group mt-3">
                    <label for="contentType">内容类型</label>
                    <select id="contentType" name="contentType" class="form-control" required>
                        <option value="text">文本</option>
                        <option value="image">图片</option>
                        <option value="file">文件</option>
                        <option value="voice">语音</option>
                    </select>
                </div>
                <div class="form-group mt-3">
                    <label for="contentDetail">内容详情</label>
                    <textarea id="contentDetail" name="contentDetail" class="form-control" rows="3" required></textarea>
                </div>

                <!-- 接收任务通知的对象列表 -->
                <div class="form-group mt-3">
                    <label for="recipients">接收对象</label>
                    <input type="text" id="recipients" name="recipients" class="form-control" placeholder="请输入对象ID，多个ID用逗号分隔" required>
                </div>

                <!-- 提交按钮 -->
                <button type="submit" class="btn btn-primary mt-4">添加任务</button>
            </form>
        </div>
    </div>
</div>

{{ template "footer" . }}
